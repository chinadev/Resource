.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "CHHYPERVISOR.1 1"
.TH CHHYPERVISOR.1 1 "2013-02-18" "perl v5.8.8" "User Contributed Perl Documentation"
.SH "NAME"
\&\fBchhypervisor\fR \- Configure the virtualization hosts.
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fB\s-1RHEV\s0 specific :\fR
.Sp
.RS 2
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-a\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-n\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-p\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-e\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-d\fR]
.RE
.PP
\&\fBzVM specific :\fR
.Sp
.RS 2
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-adddisk2pool\fR \fIfunction\fR \fIregion\fR \fIvolume\fR \fIgroup\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-addscsi\fR \fIdevice_number\fR \fIdevice_path\fR \fIoption\fR \fIpersist\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-addvlan\fR \fIname\fR \fIowner\fR \fItype\fR \fItransport\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-addvswitch\fR \fIname\fR \fIosa_dev_addr\fR \fIosa_exp_adapter\fR \fIcontroller\fR \fIconnect (0, 1, or 2)\fR \fImemory_queue\fR \fIrouter\fR \fItransport\fR \fIvlan_id\fR \fIport_type\fR \fIupdate\fR \fIgvrp\fR \fInative_vlan\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-addzfcp2pool\fR \fIpool\fR \fIstatus\fR \fIwwpn\fR \fIlun\fR \fIsize\fR \fIowner\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-removediskfrompool\fR \fIfunction\fR \fIregion\fR \fIgroup\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-removescsi\fR \fIdevice_number\fR \fIpersist (\s-1YES\s0 or \s-1NO\s0)\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-removevlan\fR \fIname\fR \fIowner\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-removevswitch\fR \fIname\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-removezfcpfrompool\fR \fIpool\fR \fIlun\fR \fIwwpn\fR]
.Sp
\&\fBchhypervisor\fR \fInoderange\fR [\fB\-\-smcli\fR \fIfunction\fR \fIarguments\fR]
.RE
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBchhypervisor\fR command can be used to configure the RHEV\-h.
.PP
The rhev-h host will register to the rhev-m automatically, but admin needs to 
approve the host can be added to the 'cluster' with \fB\-a\fR flag .
.PP
After registering, the network interfaces of host need to be added to the 'network' of 
\&\s-1RHEV\s0. And the power management for the host should be configured so that
rhev-m could make proper decision when certain host encountered error.
.PP
The \fBchhypervisor\fR command can also be used to configure the zVM host.
.PP
For each host, an entry should be added to the hypervisor table:
.PP
The columns of hypervisor table:
.Sp
.RS 2
\&\fBhypervisor.node\fR \- rhev-h host name or zVM host name (lower\-case).
.Sp
\&\fBhypervisor.type\fR \- Must be set to 'rhevh' or 'zvm'.
.Sp
\&\fBhypervisor.mgr\fR \- The rhev manager (The \s-1FQDN\s0 of rhev-m server) for the host.
.Sp
\&\fBhypervisor.interface\fR \- The configuration for the nics. Refer to \fB\-n\fR.
.Sp
\&\fBhypervisor.cluster\fR \- The cluster that the host will be added to. The 
default is 'Default' cluster if not specified. 
.RE
.SH "OPTIONS"
.IX Header "OPTIONS"
.Sh "\s-1RHEV\s0 specific :"
.IX Subsection "RHEV specific :"
.IP "\fB\-a\fR Approve the host that to be added to cluster." 2
.IX Item "-a Approve the host that to be added to cluster."
Before approve, the status of the host must be 'pending_approval'.
.IP "\fB\-n\fR Configure the network interfaces for the host." 2
.IX Item "-n Configure the network interfaces for the host."
Note: This operation only can be run when host is in 'maintenance mode'. 
Use \fB\-d\fR to switch the host to 'maintenance' mode.
.Sp
The interfaces which configured in hypervisor.interface will be added
to the network of \s-1RHEV\s0.
.Sp
The format of hypervisor.interface is multiple [network:interfacename:
protocol:IP:netmask:gateway] sections separated with '|'. For example: 
[rhevm2:eth0:static:10.1.0.236:255.255.255.0:0.0.0.0].
.RS 2
.Sp
.RS 2
\&\fBnetwork\fR \- The logic network which has been created by 'cfgve \-t nw' 
or the default management network 'rhevm'.
.Sp
\&\fBinterfacename\fR \- Physical network name: 'eth0','eth1'...
.Sp
\&\fBprotocol\fR \- To identify which boot protocol to use for the interface: dhcp 
or static.
.Sp
\&\fB\s-1IP\s0\fR \- The \s-1IP\s0 address for the interface.
.Sp
\&\fBnetmask\fR \- The network mask for the interface.
.Sp
\&\fBgateway\fR \- The gateay for the interface. This field only can be set when 
the interface is added to 'rhevm' network. 
.RE
.RE
.RS 2
.RE
.IP "\fB\-p\fR Configure the power management for the host." 2
.IX Item "-p Configure the power management for the host."
The power management must be configured for the rhev-h host to make the 
rhev-m to monitor the power status of the host, so that when certain host 
failed to function, rhev-m will fail over certain role like \s-1SPM\s0 to other active host.
.Sp
For rack mounted server, the bmc \s-1IP\s0 and user:password need to be set for the 
power management (These parameters are gotten from ipmi table). rhev-m uses the 
ipmi protocol to get the power status of the host. 
.IP "\fB\-e\fR To activate the host." 2
.IX Item "-e To activate the host."
.PD 0
.IP "\fB\-d\fR To deactivate the host to maintenance mode." 2
.IX Item "-d To deactivate the host to maintenance mode."
.IP "\fB\-h\fR Display usage message." 2
.IX Item "-h Display usage message."
.PD
.Sh "zVM specific :"
.IX Subsection "zVM specific :"
.IP "\fB\-\-adddisk2pool\fR \fIfunction\fR \fIregion\fR \fIvolume\fR \fIgroup\fR" 2
.IX Item "--adddisk2pool function region volume group"
Add a disk to a disk pool defined in the \s-1EXTENT\s0 \s-1CONTROL\s0. Function type can be 
either: (4) Define region as full volume and add to group \s-1OR\s0 (5) Add existing 
region to group. If the volume already exists in the \s-1EXTENT\s0 \s-1CONTROL\s0, use 
function 5. If the volume does not exist in the \s-1EXTENT\s0 \s-1CONTROL\s0, but is attached
to \s-1SYSTEM\s0, use function 4.
.IP "\fB\-\-addscsi\fR \fIdevice_number\fR \fIdevice_path\fR \fIoption\fR \fIpersist\fR" 2
.IX Item "--addscsi device_number device_path option persist"
Dynamically add a \s-1SCSI\s0 disk to a running z/VM system.
.IP "\fB\-\-addvlan\fR \fIname\fR \fIowner\fR \fItype\fR \fItransport\fR" 2
.IX Item "--addvlan name owner type transport"
Create a virtual network \s-1LAN\s0.
.IP "\fB\-\-addvswitch\fR \fIname\fR \fIosa_dev_addr\fR \fIosa_exp_adapter\fR \fIcontroller\fR \fIconnect (0, 1, or 2)\fR \fImemory_queue\fR \fIrouter\fR \fItransport\fR \fIvlan_id\fR \fIport_type\fR \fIupdate\fR \fIgvrp\fR \fInative_vlan\fR" 2
.IX Item "--addvswitch name osa_dev_addr osa_exp_adapter controller connect (0, 1, or 2) memory_queue router transport vlan_id port_type update gvrp native_vlan"
Create a virtual switch.
.IP "\fB\-\-addzfcp2pool\fR \fIpool\fR \fIstatus\fR \fIwwpn\fR \fIlun\fR \fIsize\fR \fIowner\fR" 2
.IX Item "--addzfcp2pool pool status wwpn lun size owner"
Add a zFCP device to a device pool defined in xCAT. The device must have been 
carved up in the storage controller and configured with a \s-1WWPN/LUN\s0 before it 
can be added to the xCAT storage pool. z/VM does not have the ability to 
communicate directly with the storage controller to carve up disks dynamically.
.IP "\fB\-\-removediskfrompool\fR \fIfunction\fR \fIregion\fR \fIgroup\fR" 2
.IX Item "--removediskfrompool function region group"
Remove a disk from a disk pool defined in the \s-1EXTENT\s0 \s-1CONTROL\s0. Function type can 
be either: (1) Remove region, (2) Remove region from group, (3) Remove region 
from all groups, \s-1OR\s0 (7) Remove entire group .
.IP "\fB\-\-removescsi\fR \fIdevice_number\fR \fIpersist (\s-1YES\s0 or \s-1NO\s0)\fR" 2
.IX Item "--removescsi device_number persist (YES or NO)"
Delete a real \s-1SCSI\s0 disk.
.IP "\fB\-\-removevlan\fR \fIname\fR \fIowner\fR" 2
.IX Item "--removevlan name owner"
Delete a virtual network \s-1LAN\s0.
.IP "\fB\-\-removevswitch\fR \fIname\fR" 2
.IX Item "--removevswitch name"
Delete a virtual switch.
.IP "\fB\-\-removezfcpfrompool\fR \fIpool\fR \fIlun\fR" 2
.IX Item "--removezfcpfrompool pool lun"
Remove a zFCP device from a device pool defined in xCAT.
.IP "\fB\-\-smcli\fR \fIfunction\fR \fIarguments\fR" 2
.IX Item "--smcli function arguments"
Execute a \s-1SMAPI\s0 function. A list of APIs supported can be found by using the 
help flag, e.g. chhypervisor pokdev61 \-\-smcli \-h. Specific arguments associated 
with a \s-1SMAPI\s0 function can be found by using the help flag for the function, 
e.g. chhypervisor pokdev61 \-\-smcli Image_Query_DM \-h. Only z/VM 6.2 and older 
\&\s-1SMAPI\s0 functions are supported at this time. Additional \s-1SMAPI\s0 functions will be 
added in subsequent zHCP versions.
.SH "RETURN VALUE"
.IX Header "RETURN VALUE"
0  The command completed successfully.
.PP
1  An error has occurred.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
.Sh "\s-1RHEV\s0 specific :"
.IX Subsection "RHEV specific :"
.IP "1. To approve the host 'host1', enter:" 2
.IX Item "1. To approve the host 'host1', enter:"
.Vb 1
\& chhypervisor host1 -a
.Ve
.IP "2. To configure the network interface for the host 'host1', enter:" 2
.IX Item "2. To configure the network interface for the host 'host1', enter:"
.Vb 1
\& chhypervisor host1 -n
.Ve
.IP "3. To configure the power management for the host 'host1', enter:" 2
.IX Item "3. To configure the power management for the host 'host1', enter:"
.Vb 1
\& chhypervisor host1 -p
.Ve
.IP "4. To activate the host 'host1', enter:" 2
.IX Item "4. To activate the host 'host1', enter:"
.Vb 1
\& chhypervisor host1 -e
.Ve
.IP "5. To deactivate the host 'host1', enter:" 2
.IX Item "5. To deactivate the host 'host1', enter:"
.Vb 1
\& chhypervisor host1 -d
.Ve
.Sh "zVM specific :"
.IX Subsection "zVM specific :"
.IP "1. To add a disk to a disk pool defined in the \s-1EXTENT\s0 \s-1CONTROL\s0, enter:" 2
.IX Item "1. To add a disk to a disk pool defined in the EXTENT CONTROL, enter:"
.Vb 1
\& chhypervisor pokdev61 --adddisk2pool 4 DM1234 DM1234 POOL1
.Ve
.IP "2. To add a zFCP device to a device pool defined in xCAT, enter:" 2
.IX Item "2. To add a zFCP device to a device pool defined in xCAT, enter:"
.Vb 1
\& chhypervisor pokdev61 --addzfcp2pool zfcp1 free 500501234567C890 4012345600000000 8G
.Ve
.IP "3. To remove a region from a group in the \s-1EXTENT\s0 \s-1CONTROL\s0, enter:" 2
.IX Item "3. To remove a region from a group in the EXTENT CONTROL, enter:"
.Vb 1
\& chhypervisor pokdev61 --removediskfrompool 2 DM1234 POOL1
.Ve
.IP "4. To remove a zFCP device from a device pool defined in xCAT, enter:" 2
.IX Item "4. To remove a zFCP device from a device pool defined in xCAT, enter:"
.Vb 1
\& chhypervisor pokdev61 --removezfcpfrompool zfcp1 4012345600000000 500501234567C890
.Ve
.IP "5. To execute a \s-1SMAPI\s0 function (Image_Query_DM), enter:" 2
.IX Item "5. To execute a SMAPI function (Image_Query_DM), enter:"
.Vb 1
\& chhypervisor pokdev61 --smcli Image_Query_DM -T LNX3
.Ve
.SH "FILES"
.IX Header "FILES"
/opt/xcat/bin/chhypervisor
