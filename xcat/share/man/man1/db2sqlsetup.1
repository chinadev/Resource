.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "DB2SQLSETUP.1 1"
.TH DB2SQLSETUP.1 1 "2013-02-06" "perl v5.8.8" "User Contributed Perl Documentation"
.SH "NAME"
\&\fBdb2sqlsetup\fR \- Sets up the IBM DB2 for xCAT to use.  
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBdb2sqlsetup\fR {\fB\-h\fR|\fB\-\-help\fR}
.PP
\&\fBdb2sqlsetup\fR {\fB\-v\fR|\fB\-\-version\fR}
.PP
\&\fBdb2sqlsetup\fR {\fB\-i\fR|\fB\-\-init\fR}{<\-S> | <\-C>} [\-o|\-\-setupODBC]  [\fB\-V\fR|\fB\-\-verbose\fR]
.PP
\&\fBdb2sqlsetup\fR {\fB\-i\fR|\fB\-\-init\fR}{<\-S>} [\-N|\-\-nostart]  [\-o|\-\-setupODBC]  [\fB\-V\fR|\fB\-\-verbose\fR]
.PP
\&\fBdb2sqlsetup\fR {\fB\-o\fR|\fB\-\-setupODBC\fR} {<\-S> | <\-C>} [\-V|\-\-verbose] 
.PP
\&\fBdb2sqlsetup\fR {\fB\-p\fR|\fB\-\-passwd\fR} [<\-S> | <\-C>]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBdb2sqlsetup\fR \- Sets up the \s-1IBM\s0 \s-1DB2\s0 database for xCAT to use. The db2sqlsetup script is run on the Management Node, after the \s-1DB2\s0 Server code has been installed, to setup the \s-1DB2\s0 Server (\-S).
The xcatd daemon will be stopped during migration on the \s-1MN\s0.  No xCAT commands should be run during the init process, because we will be migrating the xCAT database to \s-1DB2\s0 and restarting the xcatd daemon. 
.PP
The db2sqlsetup script must be  run on each Service Node, after the \s-1DB2\s0 Client code has been installed, to setup the \s-1DB2\s0 Client (\-C). There are two postscripts that are provided ( db2install and odbcsetup) that will automatically setup you Service Node  as a \s-1DB2\s0 client. 
.PP
For full information on the setup of \s-1DB2\s0,  see http://sourceforge.net/apps/mediawiki/xcat/index.php?title=Setting_Up_DB2_as_the_xCAT_DB.
.PP
When running of db2sqlsetup on the \s-1MN:\s0
One password must be supplied for the setup,  a password for the xcatdb unix id which will be used as the \s-1DB2\s0 instance id and database name.  The password will be prompted for interactively or can be input with the \s-1XCATDB2PW\s0  environment variable.
The script will create the xcat database instance (xcatdb) in the /var/lib/db2 directory unless overriden by setting the site.databaseloc attribute.  This attribute should not be set to the directory that is defined in the installloc attribute and it is recommended that the databaseloc be a new filesystem dedicated to the \s-1DB2\s0 database, especially in very large clusters.
.PP
When running db2sqlseutp on the \s-1SN:\s0 
Not only will the password for the \s-1DB2\s0 instance Id be prompted for and must match the one on the Management Node;  but also the hostname or ip address of the Management Node as known by the Service Node must be supplied , unless the \s-1XCATDB2SERVER\s0 environment variable is set.  
You can automatically install and setup of \s-1DB2\s0 on the \s-1SN\s0 using the db2install and odbcsetup postscripts and not need to manually run the command.  See the full documentation. 
.PP
Note: On \s-1AIX\s0 , root must be running ksh and on Linux,  bash shell.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-h|\-\-help\fR" 6
.IX Item "-h|--help"
Displays the usage message.
.IP "\fB\-v|\-\-version\fR" 6
.IX Item "-v|--version"
Displays the release version of the code.
.IP "\fB\-V|\-\-verbose\fR" 6
.IX Item "-V|--verbose"
Displays verbose messages.
.IP "\fB\-i|\-\-init\fR" 6
.IX Item "-i|--init"
The init option is used to setup an installed \s-1DB2\s0 database on \s-1AIX\s0 or Linux (p\-Series) so that xCAT can use the database. This must be combined with either the \-S or \-C flag to indicate whether we are setting up the Server or the Client. With the \-S flag, it involves creating the xcatdb database, the xcatdb instance id, allowing access to the xcatdb database by the Management Node. It also backs up the current xCAT database and restores it into the newly setup xcatdb \s-1DB2\s0 database.  It creates the /etc/xcat/cfgloc file to point the xcatd daemon to the \s-1DB2\s0 database and restarts the xcatd daemon using the database. 
.IP "\fB\-p|\-\-passwd\fR" 6
.IX Item "-p|--passwd"
The password change option is to change the database access password for the \s-1DB2\s0 xcatdb database. If \-S is input then it will only change the password on the \s-1DB2\s0 Server (\s-1MN\s0).  If \-C is input it will only change on the \s-1DB2\s0 clients (\s-1SN\s0).  If neither \-S or \-C are input with this flag, then it will change both the \s-1DB2\s0 Server and Clients. When changing the password the xcatd daemon will be stopped and restarted.  Any other tools accessing the database should also be stopped before changing and restarted after changing. 
.IP "\fB\-S|\-C\fR" 6
.IX Item "-S|-C"
This options says whether to setup the Server (\-S) on the Management Node, or the Client (\-C) on the Service Nodes.
.IP "\fB\-N|\-\-nostart\fR" 6
.IX Item "-N|--nostart"
This option with the \-S flag will create the database, but will not backup and restore xCAT tables into the database. It will create the cfgloc file such that the next start of xcatd will try and contact the database.  This can be used to setup the xCAT \s-1DB2\s0 database during or before install. 
.IP "\fB\-o|\-\-setupODBC\fR" 6
.IX Item "-o|--setupODBC"
This option sets up the \s-1ODBC\s0  /etc/../odbcinst.ini, /etc/../odbc.ini and the .odbc.ini file in roots home directory will be created and initialized to run off the xcatdb \s-1DB2\s0 database.
.SH "ENVIRONMENT VARIABLES"
.IX Header "ENVIRONMENT VARIABLES"
.IP "\(bu" 2
\&\s-1XCATDB2INSPATH\s0  overrides the default install path for \s-1DB2\s0 which is /opt/ibm/db2/V9.7 for Linux and /opt/IBM/db2/V9.7 for \s-1AIX\s0.
.IP "\(bu" 2
\&\s-1DATABASELOC\s0 override the where to create the xcat \s-1DB2\s0 database, which is /var/lib/db2 by default of taken from the site.databaseloc  attribute.
.IP "\(bu" 2
\&\s-1XCATDB2PW\s0 can be set to the password for the xcatdb \s-1DB2\s0 instance id so that there will be no prompting for a password when the script is run.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
.IP "\(bu" 2
To setup \s-1DB2\s0 Server for  xCAT to run on the \s-1DB2\s0 xcatdb database, on the \s-1MN:\s0
.Sp
\&\fBdb2sqlsetup\fR \fI\-i\fR \fI\-S\fR
.IP "\(bu" 2
To setup \s-1DB2\s0 Client for  xCAT to run on the \s-1DB2\s0 xcatdb database, on the \s-1SN:\s0
.Sp
\&\fBdb2sqlsetup\fR \fI\-i\fR \fI\-C\fR
.IP "\(bu" 2
To setup the \s-1ODBC\s0 for  \s-1DB2\s0 xcatdb database access, on the \s-1MN\s0 :
.Sp
\&\fBdb2sqlsetup\fR \fI\-o\fR \fI\-S\fR
.IP "\(bu" 2
To setup the \s-1ODBC\s0 for  \s-1DB2\s0 xcatdb database access, on the \s-1SN\s0 :
.Sp
\&\fBdb2sqlsetup\fR \fI\-o\fR \fI\-C\fR
.IP "\(bu" 2
To setup the \s-1DB2\s0 database but not start xcat running with it:
.Sp
\&\fBdb2sqlsetup\fR \fI\-i\fR \fI\-S\fR \fI\-N\fR
.IP "\(bu" 2
To change the \s-1DB2\s0 xcatdb password on both the Management and Service Nodes:
.Sp
\&\fBdb2sqlsetup\fR \fI\-p\fR
