.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "SWAPNODES.1 1"
.TH SWAPNODES.1 1 "2013-02-06" "perl v5.8.8" "User Contributed Perl Documentation"
.SH "NAME"
\&\fBswapnodes\fR \- swap the location info in the db (all the attributes in the ppc table and the nodepos table) between 2 nodes. If swapping within a cec, it will assign the IO adapters that were assigned to the defective node to the available node. 
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBswapnodes\fR [\fB\-h\fR| \fB\-\-help\fR]
.PP
\&\fBswapnodes\fR \fB\-c\fR \fIcurrent_node\fR \fB\-f\fR \fIfip_node\fR [\fB\-o\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This command is only for Power 775 using Direct \s-1FSP\s0 Management, and used in Power 775 Availability Plus. 
.PP
The \fBswapnodes\fR command will keep the \fBcurrent_node\fR name in the xCAT table, and use the \fIfip_node\fR's hardware resource. Besides that, the \s-1IO\s0 adapters will be assigned to the new hardware resource if they are in the same \s-1CEC\s0. So the swapnodes command will do 2 things:
.PP
.Vb 4
\&  (1)swap the location info in the db between 2 nodes:
\&   All the ppc table attributes (including hcp, id, parent, supernode and so on).
\&   All the nodepos table attributes(including rack, u, chassis, slot, room and so on).
\&  (2)assign the I/O adapters from the defective node(the original current_node) to the available node(the original fip_node) if the nodes are in the same cec.
.Ve
.PP
The \fBswapnodes\fR command shouldn't make the decision of which 2 nodes are swapped. It will just received the 2 node names as cmd line parameters.
.PP
After running \fBswapnodes\fR command, the order of the I/O devices may be changed after \s-1IO\s0 re\-assignment, so the administrator needs to run \fBrbootseq\fR to set the boot string for the current_node. And then boot the node with the same image and same postscripts because they have the same attributes.
.PP
Without \fB\-o\fR option, it's used to swap the location info in the db between 2 nodes. With \fB\-o\fR option, it's used to move the \fIcurrent_node\fR definition to \fIfip_node\fR (the 2nd octant), not move the \fIfip_node\fR definition to the 1st octant. If the two nodes are in a cec, it will assign the \s-1IO\s0 adapters that were assigned to the defective node to the available node. Originally, the \fIcurrent_node\fR is a defective non-compute node, and \fIfip_node\fR is a avaible compute node. After the swapping, the \fIcurrent_node\fR will be a available node.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-h|\-\-help\fR" 5
.IX Item "-h|--help"
Display usage message.
.IP "\fB\-c\fR" 5
.IX Item "-c"
\&\fIcurrent_node\fR \*(-- the defective non-compute node.
.IP "\fB\-f\fR" 5
.IX Item "-f"
\&\fIfip_node\fR \*(-- a compute node which will be swapped as the non-compute node.
.IP "\fB\-o\fR" 5
.IX Item "-o"
one way. Only move the \fIcurrent_node\fR definition to the \fIfip_node\fR's hardware resource, and not move the fip_node definition to the \fIcurrent_node\fR. And then the \fIcurrent_node\fR will use the \fIfip_node\fR's hardware resource, and the \fIfip_node\fR definition is not changed. if the two nodes are in the same \s-1CEC\s0, the I/O adapter from the original \fIcurrent_node\fR will be assigned to the \fIfip_node\fR.
.SH "RETURN VALUE"
.IX Header "RETURN VALUE"
0 The command completed successfully.
.PP
1 An error has occurred.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
.IP "1" 3
.IX Item "1"
To swap the service node attributes and \s-1IO\s0 assignments between sn1 and compute2 which are in the same cec, all the attributes in the ppc table and nodepos talbe of the two node will be swapped, and the the I/O adapters from the defective node (the original sn1) will be assigned to the available node (the original compute2). After the swapping, the sn1 will use the compute2's hardware resource and the I/O adapters from the original sn1.
.Sp
.Vb 1
\& swapnodes -c sn1 -f compute2
.Ve
.IP "2" 3
.IX Item "2"
To swap the service node attributes and \s-1IO\s0 assignments between sn1 and compute2 which are \s-1NOT\s0 in the same cec, all the attributes in the ppc table and nodepos talbe of the two node will be swapped. After the swapping, the sn1 will use the compute2's hardware resource.
.Sp
.Vb 1
\& swapnodes -c sn1 -f compute2
.Ve
.IP "3" 3
.IX Item "3"
Only to move the service node (sn1) definition to the compute node (compute2)'s hardware resource, and not move the compute2 definition to the sn1. After the swapping, the sn1 will use the compute2's hardware resource, and the compute2 definition is not changed.
.Sp
.Vb 1
\& swapnodes -c sn1 -f compute2 -o
.Ve
.SH "FILES"
.IX Header "FILES"
$XCATROOT/bin/swapnodes
.PP
(The \s-1XCATROOT\s0 environment variable is set when xCAT is installed. The
default value is \*(L"/opt/xcat\*(R".)
.SH "NOTES"
.IX Header "NOTES"
This command is part of the xCAT software product.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIlsvm\fR\|(1), \fImkvm\fR\|(1), \fIchvm\fR\|(1)
