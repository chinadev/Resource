.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "NIMNODESET.1 1"
.TH NIMNODESET.1 1 "2013-02-06" "perl v5.8.8" "User Contributed Perl Documentation"
.SH "NAME"
\&\fBnimnodeset\fR \- Use this xCAT command to initialize AIX/NIM standalone machines.
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBnimnodeset [\-h|\-\-help ]\fR
.PP
\&\fBnimnodeset [\-V|\-\-verbose] [\-f|\-\-force] [\-i osimage_name] [\-l location] [\-p|\-\-primarySN] [\-b|\-\-backupSN] noderange [attr=val [attr=val ...]]\fR
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This xCAT command can be used to initialize \s-1AIX/NIM\s0 standalone machines. Once this step is completed the either the xCAT \fBrnetboot\fR command or the \fBrbootseq/rpower\fR commands to initiate a network boot of the nodes.
.PP
If you are using xCAT service nodes the \fBnimnodeset\fR command will automatically determine the correct server(s) for the node and do the initialization on that server(s).
.PP
The osimage_name is the name of an xCAT osimage definition that contains the list of \s-1NIM\s0 resources to use when initializing the nodes.   If the osimage_name is not provided on the command line the code checks the node definition for the value of the \*(L"provmethod\*(R" attribute (which is the name of an osimage definition). If the osimage_image is provided on the command line then the code will also set the \*(L"provmethod\*(R" attribute of the node definiions.
.PP
This command will also create a \s-1NIM\s0 resolv_conf resource to be used when installing the node.  If a resolv_conf resource is not already included in the xCAT osimage definition and if the \*(L"domain\*(R" and \*(L"nameservers\*(R" values are set then a new
\&\s-1NIM\s0 resolv_conf resource will be created and allocated to the nodes.
.PP
The \*(L"domain\*(R" and \*(L"nameservers\*(R" attributes can be set in either the xCAT \*(L"network\*(R" definition used by the nodes or in the xCAT cluster \*(L"site\*(R" definition. The setting in the \*(L"network\*(R" definition will take priority.
.PP
The \*(L"search\*(R" field of the resolv.conf file will contain a list all the domains
listed in the xCAT network definitions and the xCAT site definiton.
.PP
The \*(L"nameservers\*(R" value can either be set to a specific \s-1IP\s0 address or the \*(L"<xcatmaster>\*(R" key word.  The \*(L"<xcatmaster>\*(R" key word means that the value of the \*(L"xcatmaster\*(R" attribute of the node definition will be used in the /etc/resolv.conf file.  (I.e.  The name of the install server as known by the node.)
.PP
You can set the \*(L"domain\*(R" and \*(L"nameservers\*(R" attributes by using the \fBchdef\fR command.  For example:
.Sp
.RS 3
chdef \-t network \-o clstr_net domain=cluster.com nameservers=<xcatmaster>
.RE
.PP
If the \*(L"domain\*(R" and \*(L"nameservers\*(R" attributes are not set in either the nodes \*(L"network\*(R" definition or the \*(L"site\*(R" definition then no new \s-1NIM\s0 resolv_conf resource
will be created.
.PP
You can specify additional attributes and values using the \*(L"attr=val\*(R" command line option.  This information will be passed on to the underlying call to the \s-1NIM\s0 \*(L"nim \-o bos_inst\*(R" command.  See the \s-1NIM\s0 documentation for information on valid command line options for the nim command.  The \*(L"attr\*(R" must correspond to a \s-1NIM\s0 attribute supported for the \s-1NIM\s0 \*(L"bos_inst\*(R" operation.  Information provided by the \*(L"attr=val\*(R" option will take precedence over the information provided in the osimage definition.
.PP
The force option can be used to reinitialize a node if it already has resources allocated or it is in the wrong \s-1NIM\s0 state. This option will reset the \s-1NIM\s0 node and deallocate resources before reinititializing.
.PP
This command will also create a \s-1NIM\s0 script resource to enable the xCAT support for user-provided customization scripts.
.PP
After the \fBnimnodeset\fR command completes you can use the \fBlsnim\fR command to check the \s-1NIM\s0 node definition to see if it is ready for booting the node. (\*(L"lsnim \-l <nim_node_name>\*(R").
.PP
You can supply your own scripts to be run on the management node  or on the service node (if their is hierarchy) for a node during the \fBnimnodeset\fR command. Such scripts are called \fBprescripts\fR. They should be copied to /install/prescripts dirctory. A table called \fIprescripts\fR is used to specify the scripts and their associated actions. The scripts to be run at the beginning of the \fBnimnodeset\fR command are stored in the 'begin' column of \fIprescripts\fR table. The scripts to be run at the end of the \fBnimnodeset\fR command are stored in the 'end' column of \fIprescripts\fR table. Please run 'tabdump prescripts \-d' command for details. An example for the 'begin' or the 'end' column is: \fIstandalone:myscript1,myscript2\fR. The following two environment variables will be passed to each script: \s-1NODES\s0 contains all the names of the nodes that need to run the script for and \s-1ACTION\s0 contains the current nodeset action, in this case \*(L"standalone\*(R". If \fI#xCAT setting:MAX_INSTANCE=number\fR is specified in the script, the script will get invoked for each node in parallel, but no more than \fInumber\fR of instances will be invoked at at a time. If it is not sepcified, the script will be invoked once for all the nodes.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fBattr=val [attr=val ...]\fR" 10
.IX Item "attr=val [attr=val ...]"
Specifies one or more \*(L"attribute equals value\*(R" pairs, separated by spaces. Attr=
val pairs must be specified last on the command line. These are used to specify additional values that can be passed to the underlying \s-1NIM\s0 commands, (\*(L"nim \-o bos_inst ...\*(R").  See the \s-1NIM\s0 documentation for valid \*(L"nim\*(R" command line options. Note that you may specify multiple \*(L"script\*(R" and \*(L"installp_bundle\*(R" values by using a comma seperated list. (ex. \*(L"script=ascript,bscript\*(R").
.IP "\fB\-b|\-\-backupSN\fR" 10
.IX Item "-b|--backupSN"
When using backup service nodes only update the backup.  The default is to update both the primary and backup service nodes
.IP "\fB\-f |\-\-force\fR" 10
.IX Item "-f |--force"
Use the force option to reinitialize the \s-1NIM\s0 machines.
.IP "\fB\-h |\-\-help\fR" 10
.IX Item "-h |--help"
Display usage message.
.IP "\fB\-i image_name\fR" 10
.IX Item "-i image_name"
The name of an existing xCAT osimage definition.
.IP "\fB\-l|\-\-location\fR" 10
.IX Item "-l|--location"
The directory location to use when creating new \s-1NIM\s0 resolv_conf resources. The d
efault location is /install/nim.
.IP "\fB\-p|\-\-primarySN\fR" 10
.IX Item "-p|--primarySN"
When using backup service nodes only update the primary.  The default is to update both the primary and backup service nodes.
.IP "\fBnoderange\fR" 10
.IX Item "noderange"
A set of comma delimited node names and/or group names. See the \*(L"noderange\*(R" man page for details on additional supported formats.
.IP "\fB\-V |\-\-verbose\fR" 10
.IX Item "-V |--verbose"
Verbose mode.
.SH "RETURN VALUE"
.IX Header "RETURN VALUE"
.IP "0" 3
The command completed successfully.
.IP "1" 3
.IX Item "1"
An error has occurred.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
1) Initialize an xCAT node named \*(L"node01\*(R".  Use the xCAT osimage named \*(L"61gold\*(R" to install the node.
.Sp
.RS 5
\&\fBnimnodeset \-i 61gold node01\fR
.RE
.PP
2) Initialize all \s-1AIX\s0 nodes contained in the xCAT node group called \*(L"aixnodes\*(R" using the image definitions pointed to by the \*(L"provmethod\*(R" attribute of the xCAT node definitions.
.Sp
.RS 5
\&\fBnimnodeset aixnodes\fR
.RE
.PP
3) Initialize an xCAT node called \*(L"node02\*(R".  Include installp_bundle resources that are not included in the osimage definition. This assumes the \s-1NIM\s0 installp_bundle resources have already been created.
.Sp
.RS 5
\&\fBnimnodeset \-i 611image node02 installp_bundle=sshbundle,addswbundle\fR
.RE
.SH "FILES"
.IX Header "FILES"
/opt/xcat/bin/nimnodeset
.SH "NOTES"
.IX Header "NOTES"
This command is part of the xCAT software product.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fImknimimage\fR\|(1), \fIrnetboot\fR\|(1)
