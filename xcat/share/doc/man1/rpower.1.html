<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>B&lt;rpower&gt; - remote power control of nodes</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rev="made" href="mailto:root@localhost" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<ul>

		<li><a href="#bmc__using_ipmi__specific_">BMC (using IPMI) specific:</a></li>
		<li><a href="#ppc__with_ivm_or_hmc__specific_">PPC (with IVM or HMC) specific:</a></li>
		<li><a href="#ppc__with_hmc__specific_">PPC (with HMC) specific:</a></li>
		<li><a href="#cec__using_direct_fsp_management__specific_">CEC (using Direct FSP Management) specific:</a></li>
		<li><a href="#frame__using_direct_fsp_management__specific_">Frame (using Direct FSP Management) specific:</a></li>
		<li><a href="#blade__using_direct_fsp_management__specific_">Blade (using Direct FSP Management) specific:</a></li>
		<li><a href="#blade_specific_">Blade specific:</a></li>
		<li><a href="#zvm_specific_">zVM specific:</a></li>
	</ul>

	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#options">OPTIONS</a></li>
	<li><a href="#examples">EXAMPLES</a></li>
	<li><a href="#see_also">SEE ALSO</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p><strong>rpower</strong> - remote power control of nodes</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p><strong>rpower</strong> <em>noderange</em> [<strong>--nodeps</strong>] [<strong>on</strong>|<strong>onstandby</strong>|<strong>off</strong>|<strong>suspend</strong>|<strong>stat</strong>|<strong>state</strong>|<strong>reset</strong>|<strong>boot</strong>] [<strong>-m</strong> <em>table.column</em>==<em>expectedstatus</em> [<strong>-m</strong> <em>table.column</em>=~<em>expectedstatus</em>]] [<strong>-t</strong> <em>timeout</em>] [<strong>-r</strong> <em>retrycount</em>]</p>
<p><strong>rpower</strong> [<strong>-h</strong>|<strong>--help</strong>|<strong>-v</strong>|<strong>--version</strong>]</p>
<p>
</p>
<h2><a name="bmc__using_ipmi__specific_">BMC (using IPMI) specific:</a></h2>
<p><strong>rpower</strong> <em>noderange</em> [<strong>on</strong>|<strong>off</strong>|<strong>softoff</strong>|<strong>reset</strong>|<strong>boot</strong>|<strong>stat</strong>|<strong>state</strong>|<strong>status</strong>|<strong>wake</strong>|<strong>suspend</strong> [<strong>-w</strong> <em>timeout</em>] [<strong>-o</strong>] [<strong>-r</strong>]]</p>
<p>
</p>
<h2><a name="ppc__with_ivm_or_hmc__specific_">PPC (with IVM or HMC) specific:</a></h2>
<p><strong>rpower</strong> <em>noderange</em> [<strong>--nodeps</strong>] {<strong>of</strong>}</p>
<p>
</p>
<h2><a name="ppc__with_hmc__specific_">PPC (with HMC) specific:</a></h2>
<p><strong>rpower</strong> <em>noderange</em> [<strong>onstandby</strong>]</p>
<p><strong>rpower</strong> <em>noderange</em> [<strong>softoff</strong>]</p>
<p>
</p>
<h2><a name="cec__using_direct_fsp_management__specific_">CEC (using Direct FSP Management) specific:</a></h2>
<p><strong>rpower</strong> <em>noderange</em> [<strong>onstandby</strong>|<strong>stat</strong>|<strong>state</strong>] [<strong>-T tooltype</strong>]</p>
<p><strong>rpower</strong> <em>noderange</em> [<strong>on</strong>|<strong>off</strong>|<strong>lowpower</strong>|<strong>resetsp</strong>]</p>
<p>
</p>
<h2><a name="frame__using_direct_fsp_management__specific_">Frame (using Direct FSP Management) specific:</a></h2>
<p><strong>rpower</strong> <em>noderange</em> [<strong>rackstandby</strong>|<strong>exit_rackstandby</strong>|<strong>stat</strong>|<strong>state</strong>|<strong>resetsp</strong>]</p>
<p>
</p>
<h2><a name="blade__using_direct_fsp_management__specific_">Blade (using Direct FSP Management) specific:</a></h2>
<p><strong>rpower</strong> <em>noderange</em> [<strong>on</strong>|<strong>onstandby</strong>|<strong>off</strong>|<strong>stat</strong>|<strong>state</strong>|<strong>sms</strong>]</p>
<p>
</p>
<h2><a name="blade_specific_">Blade specific:</a></h2>
<p><strong>rpower</strong> <em>noderange</em> [<strong>cycle</strong>|<strong>softoff</strong>]</p>
<p>
</p>
<h2><a name="zvm_specific_">zVM specific:</a></h2>
<p><strong>rpower</strong> <em>noderange</em> [<strong>on</strong>|<strong>off</strong>|<strong>reset</strong>|<strong>stat</strong>|<strong>softoff</strong>]</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p><strong>rpower</strong> controls the power for a single or range of nodes,  via the out-of-band path.</p>
<p>
</p>
<hr />
<h1><a name="options">OPTIONS</a></h1>
<dl>
<dt><strong><a name="item_on"><strong>on</strong></a></strong>

<dd>
<p>Turn power on.</p>
</dd>
</li>
<dt><strong><a name="item_onstandby"><strong>onstandby</strong></a></strong>

<dd>
<p>Turn power on to standby state</p>
</dd>
</li>
<dt><strong><a name="item__2dt"><strong>-T</strong></a></strong>

<dd>
<p>The value could be <strong>lpar</strong> or <strong>fnm</strong>. The tooltype value <strong>lpar</strong> is for xCAT and <strong>fnm</strong> is for CNM. The default value is ``<strong>lpar</strong>''. For cold start in the large cluster, it will save a lot of time if the admins use ``<strong>rpower</strong> <em>noderange</em> <strong>onstandby</strong> <strong>-T</strong> <strong>fnm</strong>'' to power on all the CECs from the management node through the <strong>fnm</strong> connections.</p>
</dd>
</li>
<dt><strong><a name="item_lowpower"><strong>lowpower</strong></a></strong>

<dd>
<p>Turn CEC to low power state (state EOCT). This is a disruptive operation which requires the CEC to be powered off prior to entering low power mode. And we can use power off command to get out of lowepower state.</p>
</dd>
</li>
<dt><strong><a name="item_rackstandby"><strong>rackstandby</strong></a></strong>

<dd>
<p>Places the rack in the rack standby state. It requires that all CECs and DE be powered off before it will run.</p>
</dd>
</li>
<dt><strong><a name="item_exit_rackstandby"><strong>exit_rackstandby</strong></a></strong>

<dd>
<p>Exit Rack standby will be the default state that a rack goes into when power is initially applied to the rack. It simply moves the BPA from Rack standby to both bpa's in standby state.</p>
</dd>
</li>
<dt><strong><a name="item_resetsp"><strong>resetsp</strong></a></strong>

<dd>
<p>Reboot the service processor. If there are primary and secondary FSPs/BPAs of one cec/frame, it will reboot them almost at the sametime.</p>
</dd>
</li>
<dt><strong><a name="item_softoff"><strong>softoff</strong></a></strong>

<dd>
<p>Attempt to request clean shutdown of OS (may not detect failures in completing command)</p>
</dd>
<dd>
<p>For stateless osimage, the 'acpid' package needs to be added to the .pkglist configuration file for the stateless osimage to enable the 'softoff' function.</p>
</dd>
</li>
<dt><strong><a name="item_off"><strong>off</strong></a></strong>

<dd>
<p>Turn power off.</p>
</dd>
</li>
<dt><strong><a name="item_suspend"><strong>suspend</strong></a></strong>

<dd>
<p>Suspend the target nodes execution.</p>
</dd>
<dd>
<p>The <strong>suspend</strong> action could be run together with <strong>-w</strong> <strong>-o</strong> <strong>-r</strong>.</p>
</dd>
<dd>
<p>Refer to the following steps to enable the <strong>suspend</strong> function:</p>
</dd>
<dd>
<p>1. Add the 'acpid' and 'suspend' package to the .pkglist of your osimage so that the required package could be installed correctly to your target system.</p>
</dd>
<dd>
<p>2. Add two configuration files for the base function:</p>
</dd>
<dd>
<pre>
 /etc/pm/config.d/suspend
     S2RAM_OPTS=&quot;--force --vbe_save --vbe_post --vbe_mode&quot;</pre>
</dd>
<dd>
<pre>
 /etc/acpi/events/suspend_event
     event=button/sleep.*
     action=/usr/sbin/pm-suspend</pre>
</dd>
<dd>
<p>3. Add the hook files for your specific applications which need specific action before or after the suspend action.</p>
</dd>
<dd>
<p>Refer to the 'pm-utils' package for how to create the specific hook files.</p>
</dd>
</li>
<dt><strong><a name="item_wake"><strong>wake</strong></a></strong>

<dd>
<p>Wake up the target nodes which is in <strong>suspend</strong> state.</p>
</dd>
<dd>
<p>Don't try to run <strong>wake</strong> against the 'on' state node, it would cause the node gets to 'off' state.</p>
</dd>
</li>
<dt><strong><a name="item_stat_7cstate"><strong>stat</strong>|<strong>state</strong></a></strong>

<dd>
<p>Print the current power state/status.</p>
</dd>
</li>
<dt><strong><a name="item_reset"><strong>reset</strong></a></strong>

<dd>
<p>Send a hard reset.</p>
</dd>
</li>
<dt><strong><a name="item_boot"><strong>boot</strong></a></strong>

<dd>
<p>If off, then power on.
If on, then hard reset.
This option is recommended over <strong>cycle</strong>.</p>
</dd>
</li>
<dt><strong><a name="item_cycle"><strong>cycle</strong></a></strong>

<dd>
<p>Power off, then on.</p>
</dd>
</li>
<dt><strong><a name="item_of"><strong>of</strong></a></strong>

<dd>
<p>Boot the node to open firmware console mode.</p>
</dd>
</li>
<dt><strong><a name="item_sms"><strong>sms</strong></a></strong>

<dd>
<p>Boot the node to open firmware SMS menu mode.</p>
</dd>
</li>
<dt><strong><a name="item__2dm_table_2ecolumn_3d_3dexpectedstatus__2dm_table"><strong>-m</strong> <em>table.column</em>==<em>expectedstatus</em> <strong>-m</strong> <em>table.column</em>=~<em>expectedstatus</em></a></strong>

<dd>
<p>Use one or multiple <strong>-m</strong> flags to specify the node attributes and the expected status for the node installation monitoring and automatic retry mechanism. The operators ==, !=, =~ and !~ are valid. This flag must be used with -t flag.</p>
</dd>
<dd>
<p>Note: if the ``val'' fields includes spaces or any other characters that will be parsed by shell, the ``attr&lt;oper-ator&gt;val'' needs to be quoted. If the operator is ``!~'', the ``attr&lt;operator&gt;val'' needs to be quoted using single quote.</p>
</dd>
</li>
<dt><strong><a name="item__2d_2dnodeps"><strong>--nodeps</strong></a></strong>

<dd>
<p>Do not use dependency table (default is to use dependency table). Valid only with <strong>on|off|boot|reset|cycle</strong> for blade power method and <strong>on|off|reset|softoff</strong> for hmc/fsp power method.</p>
</dd>
</li>
<dt><strong><a name="item__2dr_retrycount"><strong>-r</strong> <em>retrycount</em></a></strong>

<dd>
<p>specify the number of retries that the monitoring process will perform before declare the failure. The default value is 3. Setting the retrycount to 0 means only monitoring the os installation progress and will not re-initiate the installation if the node status has not been changed to the expected value after timeout. This flag must be used with -m flag.</p>
</dd>
</li>
<dt><strong><a name="item__2dt_timeout"><strong>-t</strong> <em>timeout</em></a></strong>

<dd>
<p>Specify the the timeout, in minutes, to wait for the expectedstatus specified by -m flag. This is a required flag if the -m flag is specified.</p>
</dd>
<dd>
<p>Power off, then on.</p>
</dd>
</li>
<dt><strong><a name="item__2dw_timeout"><strong>-w</strong> <em>timeout</em></a></strong>

<dd>
<p>To set the <em>timeout</em> for the <strong>suspend</strong> action to wait for the success.</p>
</dd>
</li>
<dt><strong><a name="item__2do"><strong>-o</strong></a></strong>

<dd>
<p>To specify that the target node will be power down if <strong>suspend</strong> action failed.</p>
</dd>
</li>
<dt><strong><a name="item__2dr"><strong>-r</strong></a></strong>

<dd>
<p>To specify that the target node will be reset if <strong>suspend</strong> action failed.</p>
</dd>
</li>
<dt><strong><a name="item__2dh_7c_2d_2dhelp"><strong>-h</strong>|<strong>--help</strong></a></strong>

<dd>
<p>Prints out a brief usage message.</p>
</dd>
</li>
<dt><strong><a name="item__2dv_7c_2d_2dversion"><strong>-v</strong>|<strong>--version</strong></a></strong>

<dd>
<p>Display the version number.</p>
</dd>
</li>
</dl>
<p>
</p>
<hr />
<h1><a name="examples">EXAMPLES</a></h1>
<ul>
<li>
<pre>
 rpower node4,node5 stat</pre>
<pre>
 node4: on
 node5: off</pre>
<li>
<pre>
 rpower node5 on</pre>
<pre>
 node5: on</pre>
</ul>
<p>
</p>
<hr />
<h1><a name="see_also">SEE ALSO</a></h1>
<p><a href="../man3/noderange.3.html">noderange(3)</a>, <a href="rcons.1.html">rcons(1)</a>, <a href="rinv.1.html">rinv(1)</a>, <a href="rvitals.1.html">rvitals(1)</a>, <a href="rscan.1.html">rscan(1)</a></p>

</body>

</html>
